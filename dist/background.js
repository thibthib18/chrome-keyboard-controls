(()=>{"use strict";({173:function(){var o=this&&this.__awaiter||function(o,i,t,e){return new(t||(t=Promise))((function(n,d){function r(o){try{c(e.next(o))}catch(o){d(o)}}function u(o){try{c(e.throw(o))}catch(o){d(o)}}function c(o){var i;o.done?n(o.value):(i=o.value,i instanceof t?i:new t((function(o){o(i)}))).then(r,u)}c((e=e.apply(o,i||[])).next())}))};function i(){return o(this,void 0,void 0,(function*(){return(yield chrome.tabs.query({active:!0,currentWindow:!0}))[0]}))}function t(i,t){return o(this,void 0,void 0,(function*(){yield chrome.tabs.group({groupId:t.id,tabIds:i})}))}function e(i){return o(this,void 0,void 0,(function*(){return(yield chrome.tabGroups.query({})).find((o=>o.id===i))}))}function n(i,t){return o(this,void 0,void 0,(function*(){const o=yield chrome.tabs.query({}),e=o.findIndex((o=>o.id===i.id));if(-1===e)return void console.log("Tab not found");const n=o[(e+t)%o.length];n.id&&i.id?yield chrome.tabs.move(i.id,{index:n.index}):console.log("Tab has no ID")}))}chrome.commands.onCommand.addListener((function(t){return o(this,void 0,void 0,(function*(){if("collapse-current-tab-group"===t){const t=yield function(){return o(this,void 0,void 0,(function*(){const o=yield i();return yield e(o.groupId)}))}();if(!t)return;yield function(i){return o(this,void 0,void 0,(function*(){yield chrome.tabGroups.update(i.id,{collapsed:!i.collapsed})}))}(t)}if("collapse-all-groups"===t&&(yield function(){return o(this,void 0,void 0,(function*(){const i=yield chrome.tabGroups.query({});yield Promise.all(i.map((i=>o(this,void 0,void 0,(function*(){return chrome.tabGroups.update(i.id,{collapsed:!0})})))))}))}()),"move-tab-left"===t){const o=yield i();yield n(o,-1)}if("move-tab-right"===t){const o=yield i();yield n(o,1)}if("move-tab-to-group"===t){console.log("move-tab-to-group");const o=yield i();if(!o.id)return;chrome.tabs.sendMessage(o.id,{type:"addTabToGroup"})}if("move-to-group"===t){const o=yield i();if(!o.id)return;chrome.tabs.sendMessage(o.id,{type:"moveToGroup"})}if("add-all-right-to-group"===t){const o=yield i();if(!o.id)return;chrome.tabs.sendMessage(o.id,{type:"addAllRightToGroup"})}}))})),chrome.runtime.onMessage.addListener(((n,d,r)=>(function(n,d){return o(this,void 0,void 0,(function*(){if("getGroups"===n.command)return yield chrome.tabGroups.query({});if(d.tab&&d.tab.id){if("moveToGroup"===n.command&&function(t){o(this,void 0,void 0,(function*(){if(!(yield i()).id)return;const o=yield e(t);if(!o)return;const n=yield chrome.tabs.query({groupId:o.id});0!==n.length&&n[0].id&&chrome.tabs.update(n[0].id,{active:!0})}))}(n.groupId),"addTabToNewGroup"===n.command&&function(i,t,e){o(this,void 0,void 0,(function*(){const o={tabIds:[i]},e=yield chrome.tabs.group(o);return yield chrome.tabGroups.update(e,{color:void 0,title:t})}))}(d.tab.id,n.title),"addTabToGroup"===n.command){const o=yield e(n.groupId);if(!o)return;t(d.tab.id,o)}if("addAllRightToGroup"===n.command){const d=yield e(n.groupId);if(!d)return;!function(e){o(this,void 0,void 0,(function*(){const n=yield i();(yield chrome.tabs.query({})).forEach((i=>o(this,void 0,void 0,(function*(){i.id&&i.index>=n.index&&(yield t(i.id,e))}))))}))}(d)}}}))}(n,d).then(r),!0)))}})[173]()})();