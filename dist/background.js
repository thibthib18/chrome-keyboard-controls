(()=>{"use strict";({173:function(){var o=this&&this.__awaiter||function(o,i,t,e){return new(t||(t=Promise))((function(n,d){function r(o){try{c(e.next(o))}catch(o){d(o)}}function u(o){try{c(e.throw(o))}catch(o){d(o)}}function c(o){var i;o.done?n(o.value):(i=o.value,i instanceof t?i:new t((function(o){o(i)}))).then(r,u)}c((e=e.apply(o,i||[])).next())}))};function i(){return o(this,void 0,void 0,(function*(){return(yield chrome.tabs.query({active:!0,currentWindow:!0}))[0]}))}function t(i){return o(this,void 0,void 0,(function*(){return(yield chrome.tabGroups.query({})).find((o=>o.id===i))}))}function e(i,t){return o(this,void 0,void 0,(function*(){const o=yield chrome.tabs.query({}),e=o.findIndex((o=>o.id===i.id));if(-1===e)return void console.log("Tab not found");const n=o[(e+t)%o.length];n.id&&i.id?yield chrome.tabs.move(i.id,{index:n.index}):console.log("Tab has no ID")}))}chrome.commands.onCommand.addListener((function(n){return o(this,void 0,void 0,(function*(){if("collapse-current-tab-group"===n){const e=yield function(){return o(this,void 0,void 0,(function*(){const o=yield i();return yield t(o.groupId)}))}();if(!e)return;yield function(i){return o(this,void 0,void 0,(function*(){yield chrome.tabGroups.update(i.id,{collapsed:!i.collapsed})}))}(e)}if("collapse-all-groups"===n&&(yield function(){return o(this,void 0,void 0,(function*(){const i=yield chrome.tabGroups.query({});yield Promise.all(i.map((i=>o(this,void 0,void 0,(function*(){return chrome.tabGroups.update(i.id,{collapsed:!0})})))))}))}()),"move-tab-left"===n){const o=yield i();yield e(o,-1)}if("move-tab-right"===n){const o=yield i();yield e(o,1)}if("move-tab-to-group"===n){console.log("move-tab-to-group");const o=yield i();if(!o.id)return;chrome.tabs.sendMessage(o.id,{type:"addTabToGroup"})}if("move-to-group"===n){console.log("move-to-group");const o=yield i();if(!o.id)return;chrome.tabs.sendMessage(o.id,{type:"moveToGroup"})}}))})),chrome.runtime.onMessage.addListener(((e,n,d)=>(function(e,n){return o(this,void 0,void 0,(function*(){if("getGroups"===e.command)return yield chrome.tabGroups.query({});if(n.tab&&n.tab.id){if("moveToGroup"===e.command&&(console.log("moveToGroup"),function(e){o(this,void 0,void 0,(function*(){if(!(yield i()).id)return;const o=yield t(e);if(!o)return;const n=yield chrome.tabs.query({groupId:o.id});0!==n.length&&n[0].id&&chrome.tabs.update(n[0].id,{active:!0})}))}(e.groupId)),"addTabToNewGroup"===e.command&&(console.log("addTabToNewGroup"),function(i,t,e){o(this,void 0,void 0,(function*(){const o={tabIds:[i]},e=yield chrome.tabs.group(o);return yield chrome.tabGroups.update(e,{color:void 0,title:t})}))}(n.tab.id,e.title)),"addTabToGroup"===e.command){const i=yield t(e.groupId);if(!i)return;!function(i,t){o(this,void 0,void 0,(function*(){yield chrome.tabs.group({groupId:t.id,tabIds:i})}))}(n.tab.id,i)}}else console.log("No tab ID")}))}(e,n).then(d),!0)))}})[173]()})();