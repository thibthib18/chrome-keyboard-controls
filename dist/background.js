(()=>{"use strict";({173:function(){var o=this&&this.__awaiter||function(o,i,n,e){return new(n||(n=Promise))((function(t,r){function d(o){try{c(e.next(o))}catch(o){r(o)}}function u(o){try{c(e.throw(o))}catch(o){r(o)}}function c(o){var i;o.done?t(o.value):(i=o.value,i instanceof n?i:new n((function(o){o(i)}))).then(d,u)}c((e=e.apply(o,i||[])).next())}))};function i(){return o(this,void 0,void 0,(function*(){return(yield chrome.tabs.query({active:!0,currentWindow:!0}))[0]}))}function n(i){return o(this,void 0,void 0,(function*(){return(yield chrome.tabGroups.query({})).find((o=>o.id===i))}))}function e(i,n){return o(this,void 0,void 0,(function*(){console.log(`Moving tab ${n}`);const o=yield chrome.tabs.query({}),e=o.findIndex((o=>o.id===i.id));if(-1===e)return void console.log("Tab not found");const t=o[(e+n)%o.length];t.id&&i.id?yield chrome.tabs.move(i.id,{index:t.index}):console.log("Tab has no ID")}))}chrome.commands.onCommand.addListener((function(t){return o(this,void 0,void 0,(function*(){if("collapse-current-tab-group"===t){const e=yield function(){return o(this,void 0,void 0,(function*(){const o=yield i();return yield n(o.groupId)}))}();if(!e)return;yield function(i){return o(this,void 0,void 0,(function*(){yield chrome.tabGroups.update(i.id,{collapsed:!i.collapsed})}))}(e)}if("collapse-all-groups"===t&&(yield function(){return o(this,void 0,void 0,(function*(){const i=yield chrome.tabGroups.query({});yield Promise.all(i.map((i=>o(this,void 0,void 0,(function*(){return chrome.tabGroups.update(i.id,{collapsed:!0})})))))}))}()),"move-tab-left"===t){const o=yield i();yield e(o,-1)}if("move-tab-right"===t){const o=yield i();yield e(o,1)}if("move-to-group"===t){const o=yield i();if(!o.id)return;chrome.tabs.sendMessage(o.id,{type:"open-group-selector"})}}))})),chrome.runtime.onMessage.addListener(((i,e,t)=>(function(i,e){return o(this,void 0,void 0,(function*(){if(console.log("Message received",i),"getGroups"===i.command){const o=yield chrome.tabGroups.query({});return console.log("Sending groups",o),o}if("addTabToGroup"===i.command){if(!e.tab||!e.tab.id)return;const t=yield n(i.groupId);if(!t)return;!function(i,n){o(this,void 0,void 0,(function*(){yield chrome.tabs.group({groupId:n.id,tabIds:i})}))}(e.tab.id,t)}}))}(i,e).then(t),!0)))}})[173]()})();