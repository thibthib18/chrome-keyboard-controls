(()=>{"use strict";({173:function(){var i=this&&this.__awaiter||function(i,o,t,n){return new(t||(t=Promise))((function(e,r){function d(i){try{c(n.next(i))}catch(i){r(i)}}function u(i){try{c(n.throw(i))}catch(i){r(i)}}function c(i){var o;i.done?e(i.value):(o=i.value,o instanceof t?o:new t((function(i){i(o)}))).then(d,u)}c((n=n.apply(i,o||[])).next())}))};function o(){return i(this,void 0,void 0,(function*(){return(yield chrome.tabs.query({active:!0,currentWindow:!0}))[0]}))}function t(o){return i(this,void 0,void 0,(function*(){return(yield chrome.tabGroups.query({})).find((i=>i.id===o))}))}function n(o,t){return i(this,void 0,void 0,(function*(){const i=yield chrome.tabs.query({}),n=i.findIndex((i=>i.id===o.id));if(-1===n)return void console.log("Tab not found");const e=i[(n+t)%i.length];e.id&&o.id?yield chrome.tabs.move(o.id,{index:e.index}):console.log("Tab has no ID")}))}chrome.commands.onCommand.addListener((function(e){return i(this,void 0,void 0,(function*(){if("collapse-current-tab-group"===e){const n=yield function(){return i(this,void 0,void 0,(function*(){const i=yield o();return yield t(i.groupId)}))}();if(!n)return;yield function(o){return i(this,void 0,void 0,(function*(){yield chrome.tabGroups.update(o.id,{collapsed:!o.collapsed})}))}(n)}if("collapse-all-groups"===e&&(yield function(){return i(this,void 0,void 0,(function*(){const o=yield chrome.tabGroups.query({});yield Promise.all(o.map((o=>i(this,void 0,void 0,(function*(){return chrome.tabGroups.update(o.id,{collapsed:!0})})))))}))}()),"move-tab-left"===e){const i=yield o();yield n(i,-1)}if("move-tab-right"===e){const i=yield o();yield n(i,1)}if("move-to-group"===e){const i=yield o();if(!i.id)return;chrome.tabs.sendMessage(i.id,{type:"open-group-selector"})}}))})),chrome.runtime.onMessage.addListener(((o,n,e)=>(function(o,n){return i(this,void 0,void 0,(function*(){if("getGroups"===o.command)return yield chrome.tabGroups.query({});if("addTabToNewGroup"===o.command){if(!n.tab||!n.tab.id)return;!function(o,t,n){i(this,void 0,void 0,(function*(){const i={tabIds:[o]},n=yield chrome.tabs.group(i);return yield chrome.tabGroups.update(n,{color:void 0,title:t})}))}(n.tab.id,o.title)}if("addTabToGroup"===o.command){if(!n.tab||!n.tab.id)return;const e=yield t(o.groupId);if(!e)return;!function(o,t){i(this,void 0,void 0,(function*(){yield chrome.tabs.group({groupId:t.id,tabIds:o})}))}(n.tab.id,e)}}))}(o,n).then(e),!0)))}})[173]()})();